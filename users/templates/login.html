{% extends "layouts/default.html" %}

{% load widget_tweaks static custom compress %}


{% block view_title %}Login | {% endblock %}

{% block view_content %}
	<div class="panel text-center">

		<div class="panel_" style="margin-top: 20px; width: auto; display: inline-block;">

      <div class="jumbotron">
        <h1>Reform Reporting Platform</h1>
        <p class="lead">a tool to monitor security sector status by tracking violations involving police officers</p>
        <p class="lead">
          <h2><span class="text-muted">{{violations|add:thanks}}</span> reports</h2>
          <h3><span class="text-danger">{{violations}}</span> violations - <span class="text-success">{{thanks}}</span> thanks</h3>
        </p>
      </div>

			{% comment %}
			{% if form.errors %}
			<div class="alert alert-danger">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				Your username and password didn't match. Please try again.</p>
			</div>
			{% endif %}
			{% endcomment %}


			{% if form.errors %}
			<div class="alert alert-danger">
				<button type="button" class="close" data-dismiss="alert">&times;</button>
				{% for field, errors in form.errors.items %}
					<div class="field-{{field}}">{% for error in errors %} {{error}}{% endfor %}</div>
				{% endfor %}
			</div>
			{% endif %}

			<p class="lead">contribute by signing in</p>

      <div class="row">
        <div class="col-md-8 col-md-offset-2">

    			<form action="{% url 'login' %}" class="form-inline_" method="post" role="form">
    				{% csrf_token %}

            <div class="form-group">
              <div class="input-group input-group-lg">
                <span class="input-group-addon"><i class="icon-envelope"></i></span>
                {% render_field form.username type="email" placeholder="Email" required="required" autofocus="autofocus" class="form-control" %}
              </div>
            </div>

            <div class="form-group">
              <div class="input-group input-group-lg">
                <span class="input-group-addon"><i class="icon-key"></i></span>
                {% render_field form.password placeholder="Password" required="required" class="form-control" %}
              </div>
            </div>

    				<input type="hidden" name="next" value="{{ next }}" />

            <button class="btn btn-default btn-lg btn-block" name="commit" type="submit">
              Sign in <i class="icon-arrow-right"></i>
            </button>
            <a href="{% url 'password_reset' %}">Reset your password</a>

    			</form>

        </div>

      </div>

      <div class="row" style="margin-top: 20px">
        <div class="col-md-4 col-md-offset-2">
          <a href="{% url 'socialauth_begin' 'facebook' %}?next={{next}}" class="btn btn-primary btn-block" style="background-color: #3C5A99; background-image: none;"><i class="icon-facebook-sign"></i> Sign in/up using Facebook</a>
        </div>
        <div class="col-md-4">
          <a href="{% url 'socialauth_begin' 'google' %}?next={{next}}" class="btn btn-primary btn-block" style="background-color: #547DBF; background-image: none;"><i class="icon-google-plus-sign"></i> Sign in/up using Google</a>
        </div>
      </div>

      <div class="row" style="margin-top: 20px">
        <div class="col-md-8 col-md-offset-2">
          <p class="lead text-center"><a href="{% url 'register' %}?next={{next}}">Sign up using email</a> if you do not have an account yet.</p>
        </div>
      </div>

			<!--<p class="text-center">or <a href="/register">create an account</a></p>-->

		</div>

		<div class="row">
			<div class="col-md-6" style="margin-top: 20px;">
				<div id="ui-reports-dates-chart"></div>
			</div>
			<div class="col-md-6" style="margin-top: 20px;">
				<div id="ui-stats-features-chart"></div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-4" style="margin-top: 20px;">
				<div id="ui-stats-categories-chart"></div>
			</div>
			<div class="col-md-4" style="margin-top: 20px;">
				<div id="ui-stats-victim-gender-chart"></div>
			</div>
			<div class="col-md-4" style="margin-top: 20px;">
				<div id="ui-stats-victim-education-chart"></div>
			</div>
		</div>

	</div>
{% endblock %}

{% block view_scripts %}
	<script type="text/javascript">
		reform.urls.statistics = {% url 'violations:public_statistics' as stats_url %}{{stats_url|json}};
	</script>
	{% compress js %}
	<script src="{% static 'components/highcharts.com/js/highcharts.src.js' %}"></script>
	<script src="{% static 'components/highcharts.com/js/modules/exporting.src.js' %}"></script>
	<script src="{% static 'users/scripts/login.js' %}"></script>
	{% endcompress %}
{% endblock %}
