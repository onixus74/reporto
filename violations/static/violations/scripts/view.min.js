"use strict";reform||(window.reform={data:{},urls:{},widgets:{}}),reform.widgets.map={},reform.widgets.map.init=function(){var a=reform.widgets.map,b=a.object=L.map("map",{center:new L.LatLng(reform.data.report.latitude,reform.data.report.longitude),zoom:8});L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png").addTo(b),L.marker([reform.data.report.latitude,reform.data.report.longitude]).addTo(b),L.control.scale().addTo(b),b.scrollWheelZoom.disable()},$(document).ready(reform.widgets.map.init),reform.widgets.comment={},reform.widgets.comment.init=function(){function a(a){a.preventDefault();var d="U";console.log(a.target),"ui-add-correction-comment-button"==a.target.id&&(d="C");var g=new FormData;g.append("content",b.val()),g.append("type",d),g.append("attachment",c.get(0).files[0]),console.log(c.get(0).files[0]),j.disabled=!0,$.ajax({type:"POST",url:reform.urls.comment,data:g,processData:!1,contentType:!1,headers:{"X-CSRFToken":csrf_token}}).done(function(a){$("#ui-no-comments").remove(),i.append(a.html),i.find(".fancybox").fancybox(),b.val(""),c.val(null),$.pnotify({title:a.notification.title,text:a.notification.body,type:"success",nonblock:!0}),f.attr("src",""),e.show(),f.hide(),j.disabled=!1}).fail(function(a){console.log(a);var b=a.responseJSON;$.pnotify({title:b.notification.title,text:b.errors.__all_?b.errors.__all__.join("<br>"):b.notification.body,type:"error"}),j.disabled=!1})}var b=(reform.widgets.comment,$("#ui-add-comment-content")),c=$("#ui-add-comment-attachment"),d=$("#ui-add-comment-attachment-button"),e=$("#ui-comment-attachment-icon"),f=$("#ui-comment-attachment-image"),g=$("#ui-add-update-comment-button"),h=$("#ui-add-correction-comment-button"),i=$("#ui-comments"),j=document.getElementById("ui-comments-area");c.on("change",function(a){var b=a.target.files,c=b[0],d=new FileReader;d.onload=function(){return function(a){f.attr("src",a.target.result),e.hide(),f.show()}}(c),d.readAsDataURL(c)}),d.on("click",function(){c.click()}),g.on("click",a),h.on("click",a)},$(document).ready(reform.widgets.comment.init),$(document).ready(function(){$(".fancybox").fancybox({helpers:{media:{},thumbs:{width:50,height:50}}}),$(".fancybox-thumb").fancybox({prevEffect:"none",nextEffect:"none",helpers:{thumbs:{width:50,height:50}}}),$(".fancybox-media").fancybox({helpers:{media:{}}})}),$.fn.editable.defaults.mode="inline",$.fn.editable.defaults.anim="fast",$.fn.editable.defaults.ajaxOptions={headers:{"X-CSRFToken":csrf_token}},$(document).ready(function(){$("#id_category").editable(),$("#id_datetime").editable(),$("#id_location").editable(),$("#id_description").editable({toggle:"manual"}),$("#ui-description-edit").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#ui-description").editable("toggle")}),$("#id_aggressor").editable({toggle:"manual"}),$("#ui-aggressor-edit").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#ui-aggressor").editable("toggle")}),$("#id_features").editable({toggle:"manual",select2:{multiple:!0}}),$("#ui-features-edit").on("click",function(a){a.preventDefault(),a.stopPropagation(),$("#ui-features").editable("toggle")})});
//# sourceMappingURL=/static/violations/scripts/view.min.js.map