"use strict";reform||(window.reform={data:{},urls:{},widgets:{}}),reform.widgets.map=function(){var a=reform.widgets.map=L.map("ui-timeline-map");a.setView([34.161818161230386,9.3603515625],5),a.setMaxBounds(a.getBounds()),L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png").addTo(a);var b=L.AwesomeMarkers.icon({icon:"flag",markerColor:"red"}),c=new L.MarkerClusterGroup;c.addLayers(reform.data.incidentsLocations.map(function(a){var c=L.marker(L.latLng(a.latitude,a.longitude),{title:a.category__definition,icon:b});return c.bindPopup('<a href="'+reform.urls.incidentView.replace("0",a.pk)+'" target="_blank">'+a.category__definition+"</a>"),c})),a.addLayer(c)},$(document).ready(reform.widgets.map),reform.widgets.geosearch=function(){},$(document).ready(reform.widgets.geosearch),$(document).ready(function(){reform.widgets.pagination("#ui-timeline-list",reform.data.timeline,reform.urls.incidentsDashboard)}),!function(){var a,b=[];a={name:"Incidents",color:"#c13c2d",data:[]},reform.data.incidentsByDate.forEach(function(b){a.data.push([new Date(b.date).getTime(),b.count])}),a.data.push([(new Date).getTime(),0]),b.push(a),$(document).ready(function(){console.log(b),$("#ui-incidents-dates-chart").highcharts({chart:{type:"line",zoomType:"x"},title:{text:"Incidents by date"},subtitle:{text:void 0===document.ontouchstart?"Click and drag in the plot area to zoom in":"Pinch the chart to zoom in"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e. %b",year:"%b"}},yAxis:{title:{text:"Incidents Number"},min:0},tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>"+Highcharts.dateFormat("%e. %b",this.x)+": "+this.y+" incidents"}},series:b,credits:{enabled:!1}})})}(),!function(){var a=reform.data.incidentsByCategory.map(function(a){return[a.label,a.count]});$(document).ready(function(){$("#ui-stats-categories-chart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Distribution by incident category"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",name:"Category share",data:a}],credits:{enabled:!1}})})}(),!function(){var a=reform.data.incidentsByVictimGender.map(function(a){return[a.label,a.count]});$(document).ready(function(){$("#ui-stats-victim-gender-chart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Distribution by victim's gender"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",name:"Victim's gender share",data:a}],credits:{enabled:!1}})})}(),!function(){var a=reform.data.incidentsByVictimEducation.map(function(a){return[a.label,a.count]});$(document).ready(function(){$("#ui-stats-victim-education-chart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Distribution by victim's education"},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",name:"Victim's educqtion share",data:a}],credits:{enabled:!1}})})}(),!function(){var a=reform.data.incidentsFeatures.slice(0),b=[];b.length=a.length,a.forEach(function(a,c){b[c]=0}),reform.data.incidentsByFeature.forEach(function(c){var d=a.indexOf(c.label);d>=0&&(b[d]=c.count)}),a.unshift("All"),b.unshift(reform.data.timeline.count),$(document).ready(function(){$("#ui-stats-features-chart").highcharts({chart:{type:"bar"},title:{text:"Incidents by Features"},legend:{enabled:!1},xAxis:{categories:a,title:{text:null}},yAxis:{min:0,title:{text:"Number of Incidents",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:" incidents"},plotOptions:{bar:{dataLabels:{enabled:!0}}},series:[{data:b}],credits:{enabled:!1}})})}();
//# sourceMappingURL=/static/incidents/scripts/dashboard.min.js.map