{% extends "layouts/default.html" %}

{% load static %}

{% block view_title %}Report Details | {% endblock %}

{% block view_content %}
<div class="container">

	<div class="page-header">
		<h1>Report <small></small></h1>
	</div>

	<div class="container-fluid">
		<div class="row-fluid">
			<div class="offset2 span8">

				<form class="form-horizontal">

					<div class="control-group">
						<div class="controls">
							<dl>

								<dt>Date and time</dt>
								<dd>{{report.datetime}}</dd>
								<dt>Location</dt>
								<dd>{{report.location}}</dd>
								<dt>Location text</dt>
								<dd>{{report.location_text}}</dd>
								<dt>Category</dt>
								<dd><a href="{{report.category.get_absolute_url}}">{{report.category}}</a></dd>
								<dt>Victim</dt>
								<dd><a href="{{report.victim.get_absolute_url}}">{{report.victim}}</a></dd>
								<dt>Aggressor</dt>
								<dd>{{report.aggressor}}</dd>
								<dt>Aggressor Category</dt>
								<dd>{{report.aggressor_category}}</dd>
								<dt>Description</dt>
								<dd>{{report.description}}</dd>
								<dt>Media</dt>
								<dd>
									<ul>{% get_media_prefix as MEDIA_PREFIX %}
									{% for media in report.media.all  %}
										<li><a href="{{MEDIA_PREFIX}}{{media.url}}">{{media}}</a></li>
									{% endfor %}
									</ul>
								</dd>
								<dt>Features</dt>
								<dd>
									<ul>
									{% for feature in report.features.all  %}
										<li><a href="{{feature.get_absolute_url}}">{{feature}}</a></li>
									{% endfor %}
									</ul>
								</dd>
								<dt>Is verified</dt>
								<dd>{{report.is_verified}}</dd>
								<dt>Is closed</dt>
								<dd>{{report.is_closed}}</dd>
								<dt>Comments</dt>
								<dd>
									<ul>
									{% for comment in report.comments.all  %}
										<li><a href="{{comment.get_absolute_url}}">{{comment}}</a></li>
									{% endfor %}
									</ul>
								</dd>
							</dl>
						</div>
					</div>

					<div class="form-actions">
						<a href="{% url 'reports:manage-edit' report.id %}" class="btn btn-info"><i class="icon-pencil"></i> Edit</a>
						<a href="{% url 'reports:manage-delete' report.id %}" class="btn btn-warning"><i class="icon-trash"></i> Delete</a>
						<a href="{% url 'reports:manage-list' %}" class="btn"><i class="icon-back"></i> Back</a>
					</div>

				</form>

			</div>
		</div>
	</div>

</div>
{% endblock %}

{% block view_scripts %}
	<script type="text/javascript">
		reform.urls = {
			'verify': "{% url 'reports:verify' report.id %}"
		};
		//$.post(reform.urls.verify, {csrfmiddlewaretoken: csrf_token}).done(function(data){console.log(data)})
		/*
		$.ajaxSetup({
			beforeSend: function(xhr, settings) {
				xhr.setRequestHeader("X-CSRFToken", csrf_token);
			}
		});
		*/
	</script>
{% endblock %}
