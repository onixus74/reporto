{% extends "layouts/default.html" %}

{% load static %}
{% load jsonify %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}

{% block view_title %}Report Submission | {% endblock %}

{% block view_content %}
	<form action="{% url 'reports:submission' %}" method="post">
		{% csrf_token %}

	<div class="container" ng-controller="ReportIncidentCtrl">

		{% if form.errors %}
		<div class="alert alert-error">
			<button type="button" class="close" data-dismiss="alert">&times;</button>
			{% for field, errors in form.errors.items %}
				<div>{{field}}:{% for error in errors %} {{error}}{% endfor %}</div>
			{% endfor %}
		</div>
		{% endif %}

		<div class="well report-incident-form">

			<div class="container-fluid" ng-controller="ReportIncidentCtrl">

				<div class="row-fluid">
					<div class="span12"><h1 class="text-center">I'm a ...</h1></div>
				</div>

				<div class="row-fluid">
					<div class="span6">
						<a class="btn btn-large btn-block btn-danger">Victim</a>
					</div>
					<div class="span6">
						<a class="btn btn-large btn-block btn-success">Witness</a>
					</div>
				</div>

				<div class="row-fluid">
					<div class="span8 offset2 natural-language-form">

						<p class="lead text text-center">
							I've been a victim of
							<!--<input placeholder="Incedent Category">-->
							{% render_field form.category placeholder="Location" class+="select2 span4" data-style="boostrap-select-colors-fix" %}
							that happened at
							<!--<input placeholder="Location">-->
							{% render_field form.location_text placeholder="Location" class+="span4" %}
							on
							<!--<input placeholder="Time" type="datetime-local">-->
							{% render_field form.datetime type="datetime-local" class+="span4" %}
						</p>

					</div>
				</div>

				<div class="row-fluid">
					<div class="span8 offset2">

						<div id="map" style="width:100%; height: 300px"></div>
						<!--<input type="text" name="location" id="id_location">-->

						{% render_field form.location type="hidden" %}

					</div>
				</div>
				<!--
				<div class="row-fluid">
					<div class="span6 natural-language-form">

						<p class="lead">
							I've been a victim of <input placeholder="Incedent Category"> that happened at <input placeholder="Location"> on <input placeholder="Time">
						</p>

					</div>
					<div class="span6">

						<div id="map" style="width:100%; height: 300px"></div>
						<input type="text" name="location" id="id_location">

					</div>
				</div>
				-->


				<div class="row-fluid">
					<div class="span6">
						<!--<textarea placeholder="Describe what happened" rows="5" class="input-block-level"></textarea>-->
						{% render_field form.description placeholder="Description" rows="5" class+="input-block-level" %}
					</div>
					<div class="span6">
						<textarea placeholder="Provide evidence" rows="5" class="input-block-level"></textarea>
					</div>
				</div>

				<div class="row-fluid">
					<div class="span6">
						<!--<textarea name="victim" placeholder="Victim" rows="5" class="input-block-level"></textarea>-->
						{% render_field form.victim placeholder="Victim" class+="select2 input-block-level" %}
					</div>
					<div class="span6">
						{% render_field form.aggressor placeholder="Aggressor" rows="5" class+="input-block-level" %}
					</div>
				</div>

				<div class="row-fluid">
					<div class="span12">
						<!--<input type="text" class="input-block-level" placeholder="Features">-->
						{% render_field form.features placeholder="Features" class+="select2 input-block-level" data-style="btn-large"  %}
					</div>
				</div>

				<div class="">
					<input type="submit" value="Report" class="btn btn-block btn-warning btn-large">
				</div>

			</div>
		</div>

	</div>

	</form>
{% endblock %}

{% block view_styles %}
	<!-- Map -->
	<link href='http://api.tiles.mapbox.com/mapbox.js/v1.2.0/mapbox.css' rel='stylesheet' />
{% endblock %}

{% block view_scripts %}
	<!--
	<script src="{% static 'components/angular/angular.js' %}"></script>

	<script src="{% static 'components/angular-resource/angular-resource.js' %}"></script>
	<script src="{% static 'components/angular-cookies/angular-cookies.js' %}"></script>
	<script src="{% static 'components/angular-sanitize/angular-sanitize.js' %}"></script>
	<script src="{% static 'components/ui-router/release/angular-ui-router.js' %}"></script>
	<script src="{% static 'components/angular-bootstrap/ui-bootstrap-tpls.js' %}"></script>

	<script src="{% static 'scripts/app.js' %}"></script>
	<script src="{% static 'reports/scripts/report-submission-ng.js' %}"></script>
	-->

	<!-- Map -->
	<script src='http://api.tiles.mapbox.com/mapbox.js/v1.2.0/mapbox.js'></script>

	<!-- Features -->

	<script src="{% static 'reports/scripts/report-submission.js' %}"></script>
	<script type="text/javascript">
		$(function(){
			//$('select').addClass('input-block-level').select2()
			//$('.select2').select2()
			$('.select2').selectpicker()
			/*
			$('.datetimepicker').datetimepicker({
				//language: 'en',
				pick12HourFormat: true
			});
			*/
		});
	</script>

{% endblock %}
