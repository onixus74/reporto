{% extends "layouts/default.html" %}

{% load static %}

{% block view_title %}Reports Dashboard | {% endblock %}

{% block view_content %}

	<div class="container" ng-controller="ReportsDashboardCtrl">

		<div class="page-header">
			<h1>Reports Dashboard</h1>
		</div>

		<div class="well">

			<div class="container-fluid">

				<div class="row-fluid">
					<div class="span6" ng-controller="ReportsMapCtrl">
						<h2>Map</h2>

						<div id="map" style="width:100%; height: 300px"></div>

					</div>
					<div class="span6">
						<h2>Timeline</h2>

				    <table class="table table-hover">
						{% for report in report_list %}
						<tr>
							<td class="ui-timeline-story" data-latlng="{{report.location}}">
								<a href="{{ report.victim.get_absolute_url }}">{{report.victim}}</a>
								has been a victim of
								<a href="{{ report.category.get_absolute_url }}">{{report.category}}</a>
								happened in
								<a href="/reports/by-location/{{report.location}}">{{report.location_text}}</a>
								on
								<a href="{{ report.get_absolute_url }}">{{report.datetime}}</a>
								{% if report.is_verified %}
								<span class="badge badge-success">Verified <i class="icon-ok"></i></span>
								{% endif %}
							</td>
						</tr>
						{% endfor %}
					</table>

					</div>
				</div>

				<div class="row-fluid">
					<div class="span6">
						<h2>Stats</h2>
					</div>
					<div class="span6">
						<h2>Search</h2>
					</div>
				</div>

		</div>

	</div>

{% endblock %}

{% block view_styles %}
	<!-- Map -->
	<link rel="stylesheet" href="{% static 'components/leaflet/dist/leaflet.css'%}" />
	<!--[if lte IE 8]>
	<link rel="stylesheet" href="{% static 'components/leaflet/dist/leaflet.ie.css'%}" />
	<![endif]-->
	<style>
		#map { width:100%; height: 300px}
	</style>
{% endblock %}

{% block view_scripts %}
	<!--
	<script src="{% static 'components/angular/angular.js' %}"></script>

	<script src="{% static 'components/angular-resource/angular-resource.js' %}"></script>
	<script src="{% static 'components/angular-cookies/angular-cookies.js' %}"></script>
	<script src="{% static 'components/angular-sanitize/angular-sanitize.js' %}"></script>
	<script src="{% static 'components/ui-router/release/angular-ui-router.js' %}"></script>
	<script src="{% static 'components/angular-bootstrap/ui-bootstrap-tpls.js' %}"></script>

	<script src="{% static 'scripts/app.js' %}"></script>
	<script src="{% static 'reports/scripts/reports-dashboard-ng.js' %}"></script>
	-->

	<!-- Map -->
	<script src="{% static 'components/leaflet/dist/leaflet.js' %}"></script>

	<script src="{% static 'reports/scripts/reports-dashboard.js' %}"></script>
{% endblock %}
